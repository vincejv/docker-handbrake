From 89e467fe300af0c927f88c68f9dacc94624ee699 Mon Sep 17 00:00:00 2001
From: Vince JV <1276544+vincejv@users.noreply.github.com>
Date: Thu, 18 Apr 2024 17:57:52 +0800
Subject: [PATCH] Add subjective ssim in gui presets

---
 libhb/encsvtav1.c            | 4 ++++
 libhb/handbrake/av1_common.h | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/libhb/encsvtav1.c b/libhb/encsvtav1.c
index d67d5f500..381e9118a 100644
--- a/libhb/encsvtav1.c
+++ b/libhb/encsvtav1.c
@@ -191,6 +191,10 @@ int encsvtInit(hb_work_object_t *w, hb_job_t *job)
     {
         param->tune = 1;
     }
+    else if (job->encoder_tune != NULL && strstr("subjective ssim", job->encoder_tune) != NULL)
+    {
+        param->tune = 3;
+    }
     else
     {
         param->tune = 0;
diff --git a/libhb/handbrake/av1_common.h b/libhb/handbrake/av1_common.h
index 250c0cd6b..d33251db2 100644
--- a/libhb/handbrake/av1_common.h
+++ b/libhb/handbrake/av1_common.h
@@ -31,7 +31,7 @@ static const char * const av1_svt_preset_names[] =
 
 static const char * const av1_svt_tune_names[] =
 {
-    "psnr", "ssim", "fastdecode", NULL
+    "psnr", "ssim", "subjective ssim", "fastdecode", NULL
 };
 
 static const char * const av1_svt_profile_names[] =
-- 
2.34.1

